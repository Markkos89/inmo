{% extends '../../template.html' %}

{% block content %}
<link rel="stylesheet" type="text/css" href="/css/test.css">
<style>
.toast { background: red; }
.tituloCard {
    padding: 0 0 10px 0;
    font-weight: bold !important;
}

span.precioCard {
    font-weight: bold;
    font-size: 1.3em;
}

.botonCard { text-align: right; }

span.negro { color: black; }
</style>

<div style="padding: 70px 20px 0 20px; width: 100vw;">
	<div style="display: flex; justify-content: space-between; align-items: center;">
        <h3>Posts de: {{ posts[0].nombre }}</h3>
	</div>

    <div class="row">
        {% for p in posts %}
            <div class="col m12 l6 s12">
                <div class="card">
                    <div class="contenedorSlide">
                        <div class="slideshow-container">
                            {% for f in p.fotos %}
                            <div class="mySlides fade">
                                <div class="numbertext">{{ loop.index }} / {{ p.fotos.length }}</div>
                                <img src="/uploads/posts/{{ f.path }}" style="width:100%; height: 100%;">
                            </div>

                            <a class="prev" onclick="plusSlides(-1, this)">&#10094;</a>
                            <a class="next" onclick="plusSlides(1, this)">&#10095;</a>
                            {% endfor %}
                        </div>
                        <div class="slideshow-container2">
                            <div class="postDescription">
                                <span class="tituloCard" style="text-transform: uppercase;">{{ p.descripcion_corta }}</span>
                                <p>
                                    <span class="subtitulos">Categoria:</span> Alquiler <br><br>
                                    <span class="subtitulos">Localidad:</span> {{ p.localidadtxt }}
                                </p>
                                <div class="price-container">
                                    <p class="price-offer" style="font-size: 16px;"><span class="subtitulos">Caracteristicas:</span> {{ p.descripcion }}</p>
                                </div>
                            </div>
                            <div class="publishedAt">Publicado el dia {{ p.fecha }}</div>
                        </div>
                    </div>
                    <div class="slideshow-footer">
                        <div>
                            <span class="precioCard">${{ p.precio }}</span>
                        </div>
                        <div class="">
                            <a href="/Admin/Posts/Editar/{{ p.id }}/{{ p.id_inmobiliaria_fk }}" class="red waves-effect waves-light btn-small">Editar</a>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>

{% endblock %}

{% block scripts %}
<script type="text/javascript">

$(function() {
    getPosts()
})

var slideIndex = 1;

function plusSlides(n, t) {
  showSlides(slideIndex += n, t);
}

function currentSlide(n) {
  showSlides(slideIndex = n);
}

function showSlides(n, t) {
  var i;
  var slides = $(t).parent().find(".mySlides");
  if (n > slides.length) {slideIndex = 1}    
  if (n < 1) {slideIndex = slides.length}
  for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
  }
  slides[slideIndex-1].style.display = "block"; 
}

getPosts = () => {
    var conteo = $(".slideshow-container")
    $.each(conteo, (index, item) => {
        showSlides(slideIndex, $(item).find(".mySlides"));  
    })
}

</script>
{% endblock %}
 
